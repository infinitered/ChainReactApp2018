#!/usr/bin/env bash

# Exit immediately on any failure
set -e
set -o pipefail

# Path to the ./bin folder
BINPATH=`dirname "$0"`

# Check prerequisites
$BINPATH/check

echo "-----------------------------------------------"
echo "Welcome aboard! Setting up the Chain React app."
echo "-----------------------------------------------"
echo ""
echo "NOTE: Answer 'Enable Automatically' for all react-native link prompts"
echo ""

echo "ðŸ”¨ Running yarn..."
yarn
echo ""

echo "ðŸ”¨ Installing pods..."
cd ios && pod repo update && pod install && cd ..
echo ""

echo "ðŸ”¨ Linking React Native packages..."
echo ""
react-native link
echo ""

echo "ðŸ”¨ Creating empty .env file"
echo ""
touch .env
echo ""

echo "ðŸš« If you are working on the AWS AppSync talk discussion feature of the app,"
echo "you will need a '.env' file with the proper API token. "
echo "Please ping @jamon in the #chainreact channel of the"
echo "Infinite Red community Slack (http://community.infinite.red) and we'll hook you up!"
echo ""
